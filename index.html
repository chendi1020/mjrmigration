<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset=utf-8>
	<title>UNFRST Mjr Move</title>
	<meta name=description content="Undergraduate Major Movers: NSSC first declared major to degree major">
	<meta name=viewport content="width=device-width, initial-scale=1.0">
	<!--[if lt IE 9]><script src=/dashboards/majors/html5shiv-printshiv.js></script><![endif]-->

    <script src="./javascript.js"></script>
    <link rel="stylesheet" href="styles.css"/>
   

</head>
<body>
  
  <div id=container class="container">
   
   	<header role="banner">
        <h1 style="text-align:center">UNFRST Major Migration</h1><h2 style="text-align:center">First Majors To Degree Majors By First College <u>(click the arcs to drill down to major level)</u></h2><h3 style="text-align:center">Cohort : 2005-2009</h3>
		
		<!--<div class="lead-in">
		This visualization shows undergraduate students who changed their major in Fall semesters from 2010 to 2014.
		</div> -->
	<hr>
	</header>	
   
<div id="college">
    
<select id = "opts">

    <option value="data2" >Agriculture and Natural Resources</option> 
    
    <option value="data4" >Arts and Letters</option>
    <option value="data6" >Resdntl Arts and Humanities</option> 
    <option value="data8" >Business</option> 
    <option value="data10" >Communication Arts and Science</option>
    <option value="data14" >Education</option>
    <option value="data16" >Engineering</option>
    <option value="data20" >Human Ecology</option>
    <option value="data24" >James Madison</option>
     <option value="data28" >Lyman Briggs</option>
    <option value="data30" >Music</option>
    <option value="data32" >Natural Science</option>
    <option value="data33" >Nursing</option>
    <option value="data38" >Social Science</option>
    <option value="data43" >Assoc Prov Undergraduate Education</option>
     <option value="data46" >Veterinary Medicine</option>

  <!-- and so on... -->   
  </select>   
      </div>
      


   


 

      
      
      
<!--script>
function setActiveStyleSheet(delay) {
var myElement = document.querySelector("#circle");
myElement.style.opacity = 0.25;
}
</script>
<div onClick="setActiveStyleSheet(80)">test</div
-->


	<div id="message" class="wrap">
		<main role="main">
		<nav role=navigation>
		<div id="timeline"></div>
		</nav>		
		<div id="chart"></div>
		</main>
	</div>
  <div id="diagram" ></div>

   
      
<script>
    
 
    
    function graphic (data) {
      var datafile = 'testjsonfile/newtest/'+data+ '.json';
        
      var aLittleBit = Math.PI / 100000;
        
        
 d3.json(datafile, function(data) {
      var now = "All";
      var labelCustom = " ";
      var chart = Globalmigration.chart(data, {
        element: '#diagram',
        now: "All",
        animationDuration: 700,
        margin: 100,
        arcPadding: 0.01,
	maxRegionsOpen: 10,
        layout: {
          threshold: 1,
          labelThreshold: 5,
		  colors: '1f78b4 800026 00441b FF5733 33a02c 750657 e31a1c 00a592 41ae76 461160 EEE81B 062975 80cdc1 5ACFDD e7298a 6a3d9a  a59200   062975'.split(' ').map(function(c) { return '#' + c; })
        }
      });
     Globalmigration.timeline(chart, {
        now: "All",
        element: '#timeline',
	   labelCustom: labelCustom
      }); 
      chart.draw(now);
     });
    };
    
    
   (function() {
      var datafile = 'testjsonfile/newtest/data2All.json';
        
      var aLittleBit = Math.PI / 100000;
 d3.json(datafile, function(data) {
      var now = "All";
      var labelCustom = " ";
      var chart = Globalmigration.chart(data, {
        element: '#diagram',
        now: now,
        animationDuration: 700,
        margin: 100,
        arcPadding: 0.01,
	maxRegionsOpen: 10,
        layout: {
          threshold: 1,
          labelThreshold: 5,
		  colors: '1f78b4 800026 00441b FF5733 33a02c 750657 e31a1c 00a592 41ae76 461160 EEE81B 062975 80cdc1 5ACFDD e7298a 6a3d9a  a59200    062975'.split(' ').map(function(c) { return '#' + c; })
        }
      });
     Globalmigration.timeline(chart, {
        now: now,
        element: '#timeline',
	labelCustom: labelCustom
      }); 
      chart.draw(now);
     });
    })();
    
          //race dropdown
 var race = ["All","White","Black", "Hispanic", "International", "Asian_Hawaii_PI", "Others"];
   
     
    var raceselect = d3.select('#college').append('select').attr("id","race")
                    .on('change', function(){
                         var newData1 = d3.select(this).property('value');
                           graphic('data2'+newData1);
                    });
    
     var option= raceselect.selectAll("option").data(race);
        option.enter().append('option').property("selected", function(d){return d==="All";})
            .text(function (d) { return d; });
       
    
    
 d3.select('#opts')
  .on('change', function() {
        var newData = d3.select(this).property('value');
       graphic(newData+'All');
        
       option.property("selected", function(d){return d==="All";})
           .text(function (d) { return d; });
        option.exit().remove();
    
   
        d3.select('#race').on('change',function(){
            var a  = d3.select(this).property('value');
           graphic(newData+a);
     })
        
     
});

 
       
   


	</script>
	<footer role="contentinfo">

 		<div class="license">
           
		This visualization is updated on 10/17/2016
		</div>
		
	</footer>

</body>
</html>
